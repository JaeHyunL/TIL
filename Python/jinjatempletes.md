# Jinja Templete

Jinja는 파이썬으로 작성된 탬플릿팅 엔진.

api 응답을 쉽게 렌더링 할 수 있도록한다.

{% … %}: 구조(처리)를 제어하기 위한 명령을 지정할 때 사용된다.

{{todo.item}}: 식의 값을 전달 할 때 사용된다.

{# 이 책은 훌륭한 API 책이다! #}: 주석을 기입할 때 사용되며 웹 페이지상에는 표시되지 않는다.

Jinja는 문자열로 변환 가능한 모든 파이썬 유형 또는 객체를 탬플릿 변수로 사용할 수 있다.

모델, 리스트, 딕셔너리 유형을 템플릿에 전달해서 값이나 속성을 사용할 수 있는데 이때 {{}}구문이 사용되ㅏㄴㄷ.

### 필터

문자열 병합이나 첫 문자를 대문자로 변환하기 등 파이썬의 문자열 수정 구문은 Jinja에서 사용할 수 없다. 따라서 이런 수정 작업은 Jinja 필터를 사용해서 해야한다.

필터는 파이프기호(|)를 사용해서 구분하며 괄호를 사용해 선택적 인수를 지정한다.

{{ variable | filter_name(*args) }} 인수가 없다면 다음과 같이 정의해도 된다.

{{ variable | filter_name }} 자주 사용되는 필터를 살펴보자.

**변환 필터**

데이터 유형을 변환한다.

{{ 3.142 | int }} = 3

{{ 31 | float }} = 31.0

**병합 필터**

리스트 내의 요소들을 병합해서 하나의 문자열로 만든다.

{{ [’리스트’, ‘병합’, ‘요소’] }} | join(’ ‘ ) }}

= 리스트 병합 요소

**길이 필터**

전달된 객체의 길이를 반환한다. 파이썬의 len과 같은 역할을 한다.

Todo count: {{ todos | length }}

Todo count: 4

Jinja가 제공하는 전체 필터를 보고 싶다면 웹 페이지를 참고하자.

**if 문**

Jinja의 if문은 파이썬과 사용법이 유사하며 {% %} 제어 블록 내에서 사용할 수 있다.

{% if todo | length < 5 }

{% else %}

{% endif %}

**반복문**

Jinja에서 변수를 사용해서 반복처리를 할 수 이;ㅆ다. 다음과 같이 리스트 또는 일반적인 함수를 사용할 수 도 있다.

{% for todo in tods %}

<b> {{ todo.item }} </b>

{% endfor %}

반복문에서 사용되는 특수 변수

| 변수               | 설명                                                         |
| ------------------ | ------------------------------------------------------------ |
| loop.index         | 반복의 현재 인덱스(회차)를 보여준다(시작 인덱스는 1).        |
| loop.index0        | 반복의 현재 인덱스를보여준다(시작인덱스 0)                   |
| loop.revindex      | 뒤에서부터의 반복 인덱스를 보여준다(시작 인덱스는 1).        |
| loop.revindex0     | 뒤에서 부터의 반복인덱스를 보여준다.( 시작 인덱스0)          |
| loop.first         | 첫 번쨰 반복이면 True                                        |
| loop.las           | 마지막 반복이면 True                                         |
| loop.length        | 리스트 아이템 수 반환                                        |
| loop.cycle         | 리스트 내의 값을 차례대로 사용                               |
| loop.depth         | 재귀적 반복에서 현재 렌더링 단계를 보여준다(1단계부터 시작). |
| loop.depth0        | 재귀적 반복에서 현재 렌더링 단계를 보여준다(0단계부터 시작). |
| loop.previtem      | 이전 반복에 사용한 아이템을 반환한다(첫 반복에서는 정의되지 않음) |
| loop.nextitem      | 다음반복에서 사용할 아이템을 반환한다(마지막 반복에서는 정의되지않음) |
| loop.changed(*val) | 이전에 호출한 값과 다르면 True를 반환한다(전혀 호출되지 않은 경우도 포함). |
|                    |                                                              |

**매크로**

Jinja의 매크로는 함수로, HTML을 반환한다. 매크로 사용의 주요 목적은 하나의 함수를 사용해ㅑ 반복적으로 작성하는 코드를 줄이는 것이다. 예를들어 (input)매크로를 정의해서 html폼에 반복적으로 정의하는 입력태그를 줄일 수 있다.

{ macro input(name, value=’’, type=’text’, size=20 %}

<div class=’form’>

<inpujt type=’{{ type }}’ name=’{{ name}}’

value=’{{ value|escape }}’ size=’{{size}} >

<div>

{% endmacro %}